<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A simple survival simulation. — surv_sim1 • MDChelp</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A simple survival simulation. — surv_sim1"><meta name="description" content="Simulate known fate or apparent survival data via a HMM, with or without
interval censoring or right censoring. The default parameter values simulate
survival data without interval or right censoring."><meta property="og:description" content="Simulate known fate or apparent survival data via a HMM, with or without
interval censoring or right censoring. The default parameter values simulate
survival data without interval or right censoring."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MDChelp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tlyons253/MDChelp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A simple survival simulation.</h1>
      <small class="dont-index">Source: <a href="https://github.com/tlyons253/MDChelp/blob/master/R/logexp.R" class="external-link"><code>R/logexp.R</code></a></small>
      <div class="d-none name"><code>surv_sim1.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Simulate known fate or apparent survival data via a HMM, with or without
interval censoring or right censoring. The default parameter values simulate
survival data without interval or right censoring.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">surv_sim1</span><span class="op">(</span></span>
<span>  S.int <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  nind <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  ntime <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  p.obs <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  last.obs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  obs.start <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  censor.parms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  visit.parms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"RAW"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-s-int">S.int<a class="anchor" aria-label="anchor" href="#arg-s-int"></a></dt>
<dd><p>the interval survival probability</p></dd>


<dt id="arg-nind">nind<a class="anchor" aria-label="anchor" href="#arg-nind"></a></dt>
<dd><p>the number of individuals</p></dd>


<dt id="arg-ntime">ntime<a class="anchor" aria-label="anchor" href="#arg-ntime"></a></dt>
<dd><p>the length of the encounter histories</p></dd>


<dt id="arg-p-obs">p.obs<a class="anchor" aria-label="anchor" href="#arg-p-obs"></a></dt>
<dd><p>detection probability for imperfect detection</p></dd>


<dt id="arg-last-obs">last.obs<a class="anchor" aria-label="anchor" href="#arg-last-obs"></a></dt>
<dd><p>TRUE or FALSE. Is the terminal time interval observed.
Typically TRUE in nest survival studies.</p></dd>


<dt id="arg-obs-start">obs.start<a class="anchor" aria-label="anchor" href="#arg-obs-start"></a></dt>
<dd><p>TRUE or FALSE, if true, all individuals are observed at time
=1, otherwise. all individuals may not be observed until later in their
encounter history, or not at all before failing. They are not removed from
the data object and must be excluded before use in analysis.</p></dd>


<dt id="arg-censor-parms">censor.parms<a class="anchor" aria-label="anchor" href="#arg-censor-parms"></a></dt>
<dd><p>a vector of length 2, giving the probability an
individual is censored and the probability defining the time an individual
is censored. The time of censoring is generated by a binomial where the
maximum length of the encounter history is the number of trials and the
second parameter is the probability. The default values prevent any
individual from being censored. Here, censoring is a known event (i.e. a
known transmitter failure, drop, etc.)</p></dd>


<dt id="arg-visit-parms">visit.parms<a class="anchor" aria-label="anchor" href="#arg-visit-parms"></a></dt>
<dd><p>a vector of length 2, giving a "maximum probability" of a
visit and the number of days over which to consider. The probability of a
visit is calculated according to the formula below.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>LOGEXP, KF, CJS, SURV or RAW, the default. Controls the type of
output provided (described below)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p>type==CJS- A wide matrix of 1,0; apparent survival.</p></li>
<li><p>type==KF- a wide matrix of 1(live), and 2(dead); A multi-state HMM</p></li>
<li><p>type==LOGEXP- along data frame formatted for logistic exposure; known fate</p></li>
<li><p>type==SURV- a long data frame of entry time, last observation, and if the
observation was censored or an event was observed-suitable for survival
analysis using the survival program.</p></li>
<li><p>type==RAW- Raw observation matrix, visit matrix, detection matrix, and
vectors describing the first and last time intervals for which and
individual should be included, that last interval they were observed alive,
as well as a vector indicating which individuals are censored and when.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Known-fate data requires individuals are observable in a dead state. When
individuals cannot be observed in a dead state and detection is imperfect,
apparent survival is the result.</p>
<p>Interval censoring is accomplished by including a visit probability. This
will inherently lead to right-censoring, but here, the observation at the
last time interval can be fixed to 1 and right censoring is simulated
alternatively by providing censoring parameters. Thus, when there is no
explicit right censoring, all dead individuals are observed dead at least one
time, unless "CJS" is selected as the output format.</p>
<p>The visit probability is not an independent random probability. It's
constructed such that given a "maximum" visit probability Q and a time window
W the probability of a visit at time t (\(p_t\)) is:
$$\sum\limits_{t-W}^{t-1}{\substack{1\ if\ a\ visit\ occurred\\ 0\ if\ no\
visit}} = K\\ p_t=Q^{3K}$$
This way, if there hasn't been a visit in W days, one will occur with a
probability = Q. If there has been &gt; 1, then the probability drops off
dramatically.</p>
<p>Right censoring is created by providing two probabilities. The first defines
the probability any individual will be censored. The second is used in a
binomial probability where n_trials is the length of the observation period.
While true right censoring can occur at any time, this better simulates more
common causes of right censoring, like transmitters failing at the end of
battery life. Encounter matrices are generated for the full time series, but
right censored observations are indicated by a negative value. To avoid
issues in analysis, vectors indicating the time when an individual is first
observed and when and individual "leaves" the study (if known) are provided.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tim Lyons.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

